<div class="contenedor">

  <!-- ENCABEZADO (Igual que antes) -->
  <div class="encabezado-seccion">
    <h1 class="titulo-pagina">
      <i class="fas fa-truck-loading"></i> Cat√°logo de Productos
    </h1>

    <div class="contenedor-botones">
      <button class="boton boton-primario boton-con-icono" routerLink="/add-producto">
        <i class="fas fa-plus-circle"></i> Nuevo producto
      </button>

      <button class="boton boton-secundario boton-con-icono" routerLink="/dashboard">
        <i class="fas fa-arrow-alt-circle-left"></i> Volver al Dashboard
      </button>
    </div>
  </div>

  <!-- FILTROS (Igual que antes) -->
  <div class="filtros-container">
    <div class="filtro-item">
      <label>Buscar:</label>
      <input type="text" placeholder="Nombre..." [(ngModel)]="busqueda" (input)="aplicarFiltros()" />
    </div>

    <div class="filtro-item">
      <label>Proveedor:</label>
      <select [(ngModel)]="proveedorFiltro" (change)="aplicarFiltros()">
        <option value="">Todos</option>
        <option *ngFor="let p of proveedores" [value]="p.id">
          {{ p.nombre }}
        </option>
      </select>
    </div>

    <div class="filtro-item">
      <label>Orden:</label>
      <select [(ngModel)]="ordenStock" (change)="aplicarFiltros()">
        <option value="">Defecto</option>
        <option value="asc">Stock: Menor a Mayor</option>
        <option value="desc">Stock: Mayor a Menor</option>
      </select>
    </div>

    <button class="btn-limpiar" (click)="limpiarFiltros()">Limpiar</button>
  </div>

  <!-- üìå AQU√ç COMIENZA EL GRID DE CARDS -->
  <div class="grid-productos">
    
    <!-- TARJETA INDIVIDUAL -->
    <div class="card-producto" *ngFor="let p of productosFiltrados">
      
      <!-- Imagen del producto -->
      <div class="card-imagen">
        <!-- Si p.imagen_url es null, muestra una imagen por defecto -->
        <img [src]="p.imagen_url || 'assets/no-image.png'" alt="{{ p.nombre }}">
        
        <!-- Badge de Stock superpuesto -->
        <span class="badge-stock" [ngClass]="getClaseStock(p.stock)">
          Stock: {{ p.stock }}
        </span>
      </div>

      <div class="card-contenido">
        <h3 class="producto-titulo">{{ p.nombre }}</h3>
        <p class="producto-marca">{{ p.marca || 'Marca Gen√©rica' }}</p>
        
        <div class="producto-detalles">
          <p class="precio">{{ p.precio_final | currency:'ARS':'symbol':'1.0-0' }}</p>
          <small class="proveedor">Prov: {{ getNombreProveedor(p.proveedor_id) }}</small>
        </div>

        <p class="descripcion-corta" title="{{ p.descripcion }}">
          {{ p.descripcion || 'Sin descripci√≥n' }}
        </p>
      </div>

      <!-- Acciones (Botones) -->
      <div class="card-acciones">
        <button class="btn-icon editar" [routerLink]="['/add-producto', p.id]" title="Editar">
          <i class="fas fa-edit"></i>
        </button>
        <button class="btn-icon eliminar" (click)="eliminar(p.id!)" title="Eliminar">
          <i class="fas fa-trash-alt"></i>
        </button>
      </div>
    </div>

  </div>

  <!-- MENSAJE SIN DATOS -->
  <div *ngIf="productosFiltrados.length === 0" class="mensaje-vacio">
    <i class="fas fa-box-open"></i>
    <p>No hay productos que coincidan con la b√∫squeda.</p>
  </div>

</div>